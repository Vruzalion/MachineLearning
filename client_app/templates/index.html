
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="static/css/def.css">
    <title>ABAPATHI</title>
</head>
<body>
    <div class="container" id="container">

        <nav id="navbar" class="navbar">
            <h1 class="ababati" style="color:white;">ABAPATHI</h1>
            <a id="nav-link" class="nav-link" href="#welcome-section">About</a>
            <a id="nav-link" class="nav-link" href="#selection">Image Classifier</a>
        </nav>
    
        <div class="welcome-section" id="welcome-section">
            <h1 style="text-align:center;">Hey! Welcome to ABAPATHI</h1>
            <p style="text-align:center;"><i>Abapathi is an application that uses a CNN(Convolutional Neural Network) model to distinguish between fish images and plastic images, both taken in ocean water.</i></p>
        </div>
        
        <div class="projects" id="projects">
            <header>
                <h2>Image Classifier</h2>
                <p style="text-align:center; font-size:30px">In this section, we will proceed to the classification of an image of your choice</p>
            </header>
    
            <div id="project-tile" class="project-tile">
                <div class="card" width="18rem">
                    <img class="card-img-top" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-rghii3pUoE07AGgGSyZfjyCKI7Msb5LbQ1SuMOseE_R6of8Gs5iBuuaTUB2JgFghAKI&usqp=CAU" alt="image de poisson">
                    <div class="card-body">
                      <h5 class="card-tile"><a href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-rghii3pUoE07AGgGSyZfjyCKI7Msb5LbQ1SuMOseE_R6of8Gs5iBuuaTUB2JgFghAKI&usqp=CAU">Example of a fish image</a></h5>
                    </div>
                </div>
                <div class="card" width="18rem">
                    <img class="card-img-top" src="https://cdn.givingcompass.org/wp-content/uploads/2019/04/04183117/Fighting-Plastic-Pollution-With-Bags-That-Dissolve-in-Water.jpg">
                    <div class="card-body">
                      <h5 class="card-tile"><a href="https://cdn.givingcompass.org/wp-content/uploads/2019/04/04183117/Fighting-Plastic-Pollution-With-Bags-That-Dissolve-in-Water.jpg">Exemple of a plastic waste image</a></h5>
                    </div>
                </div>
            </div> 

            <div class="selection" id="selection">
                <form method="POST" action="/classify#result">
                    <h2>Select the source of your image (from your computer or from internet)</h2>
                    <fieldset>
                        <label for="img_source">From where do you want to load image for test?</label>
        
                        <input type="radio" id="r_1" name="img_source" value="1" checked>
                        <label for="r_1">Using an url</label>
        
                        <input type="radio" id="r_2" name="img_source" value="2">
                        <label for="r_2">From the local storage</label>
                    </fieldset>
        
                    <hr>
                    
        
                    <fieldset id="select_url">
                        <label for="img_url">URL of the image to classify: </label>
                        <input id="img_url" name="img_url" placeholder="image url"  type="url" onkeypress="return event.keyCode!=13">
                        <button id="set_image_button" onclick="setTestImageFromURL(event)">set test image</button>
                        <hr>
                    </fieldset>
        
                    <fieldset id="select_local" style="display:none">
                        <p>
                            You should have placed your image in the <b> client_app/static/img </b> folder the application.
                        </p>

                        <hr>

                        <label for="img_file">Set the name of the image to classify(with the file extension): </label>
                        <input id="img_file" name="img_file"  type="text" onkeypress="return event.keyCode!=13">
                        <button id="set_image_button" onclick="setTestImageFromLocal(event)">set test image</button>
                        
                    </fieldset>
        
                    <div>
                        <img src = "{{ image_url }}" id="img" width="200" alt="img"/>
                    </div>
        
                    <button id="submit" type="submit">Classify</button>
                </form>
        
                <div id="result">
                    {{ result }}
                </div>
        
                <script>
                    
                    var image = document.getElementById("img");
        
                    //gestion du menu pour le mode de sélection de l'image de test
                    var radioMenu = document.getElementsByName("img_source");
                    var selectURL = document.getElementById("select_url");
                    var selectLocal = document.getElementById("select_local");
        
                    for(var i = 0; i < radioMenu.length; i++){
        
                        radioMenu[i].addEventListener('change', function(){
                            console.log(this.value);
                            var menuChoice = this.value;
                            console.log(menuChoice);
        
                            if(menuChoice == 1){
                                selectURL.style.display = "block";
                                selectLocal.style.display = "none";
                            }else{
                                selectURL.style.display = "none";
                                selectLocal.style.display = "block";
                                console.log(selectURL);
                            }
                        })
                    }
        
                    //gestion du formulaire pour la sélection de l'image en ligne
                    var url_input = document.getElementById("img_url");
                   
                    function setTestImageFromURL(e){
                        var result = document.getElementById("result");

                        result.innerHTML = "";

                        if(url_input){
                            image.setAttribute('src', url_input.value);
                        }
        
                        e.preventDefault();
                    }
        
                    //gestion du formulaire de sélection de l'image en local
                    var img_file = document.getElementById("img_file");

                    function setTestImageFromLocal(e){
                        var result = document.getElementById("result");

                        result.innerHTML = "";

                        if(img_file){
                            image.setAttribute('src', "static/img/" + img_file.value);
                        }
        
                        e.preventDefault();
                    }
                    
                </script>
                
                
                <!-- Bootstrap Core JavaScript -->
                <script src="static/js/bootstrap/bootstrap.min.js" charset="utf-8"></script>
        
        </div>
        </div>

        
</body>
</html>